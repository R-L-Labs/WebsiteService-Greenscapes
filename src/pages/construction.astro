---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.vue';
import Hero from '../components/Hero.vue';
import Services from '../components/Services.vue';
import About from '../components/About.vue';
import Projects from '../components/Projects.vue';
import Testimonials from '../components/Testimonials.vue';
import ContactCTA from '../components/ContactCTA.vue';
import Footer from '../components/Footer.vue';

import * as data from '../data/construction';
import { getSocialProjects, getSocialTestimonials } from '../lib/social';

const instagramProjects = await getSocialProjects(6);
const facebookTestimonials = await getSocialTestimonials(3);
const projectItems = instagramProjects?.length ? instagramProjects : data.projects.items;
const testimonialItems = facebookTestimonials?.length ? facebookTestimonials : data.testimonials.items;
---

<Layout
  title="Construction Services - Greenscapes South Jersey"
  description="Professional outdoor construction services in Sicklerville, NJ including pergolas, decks, fencing, drainage solutions, gazebos, and site grading."
>
  <Navbar client:load />
  <main class="pt-16" style="--color-primary: #8B5E3C; --color-primary-light: #A0724F; --color-primary-dark: #6B4226;">
    <Hero
      badge={data.hero.badge}
      title={data.hero.title}
      titleAccent={data.hero.titleAccent}
      description={data.hero.description}
      ctaPrimary={data.hero.ctaPrimary}
      ctaSecondary={data.hero.ctaSecondary}
      stats={data.hero.stats}
    />
    <Services
      subtitle={data.services.subtitle}
      title={data.services.title}
      description={data.services.description}
      items={data.services.items}
    />
    <About
      title={data.about.title}
      paragraphs={data.about.paragraphs}
      features={data.about.features}
      accentStat={data.about.accentStat}
    />
    <Projects
      subtitle={data.projects.subtitle}
      title={data.projects.title}
      description={data.projects.description}
      items={projectItems}
    />
    <Testimonials
      subtitle={data.testimonials.subtitle}
      title={data.testimonials.title}
      description={data.testimonials.description}
      items={testimonialItems}
    />
    <ContactCTA client:load />
  </main>
  <Footer />
</Layout>
